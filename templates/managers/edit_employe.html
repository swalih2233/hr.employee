<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manager Dashboard</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">
<div class="flex h-screen">
  <!-- Add Alpine.js for dropdown functionality -->
  <script src="https://unpkg.com/alpinejs" defer></script>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-y-auto">
    <!-- Header -->
    <header class="flex items-center justify-between px-4 md:px-8 py-5 border-b bg-white shadow-sm">
      <!-- Logo and Greeting -->
     <div class="flex items-center space-x-4">
    <a href="{% url 'managers:manager_dashboard' %}" class="flex items-center">
        <img src="/static/images/Black Transparent Mavendeor .png"
             alt="Logo"
             class="h-10 md:h-[70px] w-auto object-contain">
    </a>
   
    </div>
      
      <div class="flex items-center space-x-2 md:space-x-5">
        <!-- Search -->
        <input type="text" placeholder="Search…" 
               class="hidden md:block px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />

        <!-- Notification -->
        <a href="{% url 'managers:leavelist' %}" class="relative p-2 text-gray-500 hover:bg-gray-100 rounded-full">
          <svg class="w-5 h-5 md:w-6 md:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
          {% if notification_count > 0 %}
          <span class="absolute top-0 right-0 block h-4 w-4 md:h-5 md:w-5 text-xs bg-red-500 text-white rounded-full flex items-center justify-center">{{ notification_count }}</span>
          {% endif %}
        </a>

        <!-- Profile Image — shows only logged-in user's image -->
        <div x-data="{ open: false }" class="relative">
          <button @click="open = !open" class="flex items-center focus:outline-none">
            <img src="{% if profile.image %}{{ profile.image.url }}{% else %}{% static 'images/1.png' %}{% endif %}" class="w-7 h-7 md:w-8 md:h-8 rounded-full" alt="Profile">
          </button>
          <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20" style="display: none;">
            <a href="{% url 'managers:logout' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign Out</a>
          </div>
        </div>
      </div>
    </header>

  

    <!-- Back Link (Below Header) -->
    <div class="px-4 md:px-8 py-4">
      <a href="{% url 'managers:manager_dashboard' %}" class="text-blue-600 hover:underline text-sm font-medium inline-flex items-center">
        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Dashboard
      </a>
    </div>

    <section class="mb-[70px] mt-[50px]">
        <section class="wrapper">
            <div class="flex justify-center items-center min-h-screen py-8">
                <div class="bg-white shadow-xl rounded-lg p-8 w-full max-w-6xl">
                    <h1 class="text-3xl font-semibold text-center mb-8 text-gray-700">Edit Details</h1>

                    <!-- Form Starts -->
                    <form action="#" method="post" class="space-y-12" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <!-- Employee ID Only Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Update Employee Leave Details</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="employe_id" class="block text-gray-600 font-medium">Employee ID</label>
                                    <input type="text" id="employe_id" name="employe_id" value="{{ employe.employe_id }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500" placeholder="Enter Employee ID" required>
                                </div>
                                <div>
                                    <label for="carryforward_granted" class="block text-gray-600 font-medium">Carry-forward Granted</label>
                                    <input type="number" id="carryforward_granted" name="carryforward_granted" value="{{ employe.carryforward_granted }}" min="0" max="18" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="flex justify-end gap-4">
                            <a href="{% url 'managers:employees_list' %}" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition">Cancel</a>
                            <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition">Update Details</button>
                        </div>
                    </form>
                    
                    <!-- Hidden: Personal Information Section -->
                    <div style="display: none;">
                    <form class="space-y-12">
                        
                        <!-- Personal Information Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Personal Information</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="first_name" class="block text-gray-600 font-medium">First Name</label>
                                    <input type="text" id="first_name" name="first_name" value="{{ employe.user.first_name }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="last_name" class="block text-gray-600 font-medium">Last Name</label>
                                    <input type="text" id="last_name" name="last_name" value="{{ employe.user.last_name }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="email" class="block text-gray-600 font-medium">Email</label>
                                    <input type="email" id="email" name="email" value="{{ employe.user.email }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="phone_number" class="block text-gray-600 font-medium">Phone Number</label>
                                    <input type="text" id="phone_number" name="phone_number" value="{{ employe.user.phone_number }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="date_of_birth" class="block text-gray-600 font-medium">Date of Birth</label>
                                    <input type="date" id="date_of_birth" name="date_of_birth" value="{{ user_date_of_birth }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="gender" class="block text-gray-600 font-medium">Gender</label>
                                    <select id="gender" name="gender" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                        <option value="">Select Gender</option>
                                        <option value="Male" {% if employe.user.gender == 'Male' %}selected{% endif %}>Male</option>
                                        <option value="Female" {% if employe.user.gender == 'Female' %}selected{% endif %}>Female</option>
                                        <option value="Other" {% if employe.user.gender == 'Other' %}selected{% endif %}>Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="maritul_status" class="block text-gray-600 font-medium">Marital Status</label>
                                    <select id="maritul_status" name="maritul_status" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                        <option value="">Select Status</option>
                                        <option value="single" {% if employe.user.maritul_status == 'single' %}selected{% endif %}>Single</option>
                                        <option value="married" {% if employe.user.maritul_status == 'married' %}selected{% endif %}>Married</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="image" class="block text-gray-600 font-medium">Profile Image</label>
                                    <input type="file" id="image" name="image" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                    <br />
                                    <img src="{{ employe.image.url }}" alt="image" class="w-[70px] rounded-lg border border-gray-300">
                                </div>
                            </div>
                        </div>

                        <!-- Employment Details Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Employment Details</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="employe_id" class="block text-gray-600 font-medium">Employee ID</label>
                                    <input type="text" id="employe_id" name="employe_id" value="{{ employe.employe_id }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="department" class="block text-gray-600 font-medium">Department</label>
                                    <input type="text" id="department" name="department" value="{{ employe.department }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="designation" class="block text-gray-600 font-medium">Designation</label>
                                    <input type="text" id="designation" name="designation" value="{{ employe.designation }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="date_of_joining" class="block text-gray-600 font-medium">Date of Joining</label>
                                    <input type="date" id="date_of_joining" name="date_of_joining" value="{{ date_joining }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="employment_Type" class="block text-gray-600 font-medium">Employment Type</label>
                                    <select id="employment_Type" name="employment_Type" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                        <option value="">Select Type</option>
                                        <option value="FT" {% if employe.employment_Type == 'FT' %}selected{% endif %}>Full Time</option>
                                        <option value="PT" {% if employe.employment_Type == 'PT' %}selected{% endif %}>Part Time</option>
                                        <option value="CT" {% if employe.employment_Type == 'CT' %}selected{% endif %}>Contract</option>
                                        <option value="FR" {% if employe.employment_Type == 'FR' %}selected{% endif %}>Freelance</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="employe_status" class="block text-gray-600 font-medium">Employee Status</label>
                                    <select id="employe_status" name="employe_status" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                        <option value="">Select Status</option>
                                        <option value="AT" {% if employe.employe_status == 'AT' %}selected{% endif %}>Active</option>
                                        <option value="PR" {% if employe.employe_status == 'PR' %}selected{% endif %}>Probation</option>
                                        <option value="LE" {% if employe.employe_status == 'LE' %}selected{% endif %}>Leave</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="reporting_manager" class="block text-gray-600 font-medium">Reporting Manager</label>
                                    <input type="text" id="reporting_manager" value="{{ employe.reporting_manager }}" name="reporting_manager" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                                <div>
                                    <label for="work_location" class="block text-gray-600 font-medium">Work Location</label>
                                    <input type="text" id="work_location" value="{{ employe.work_location }}" name="work_location" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg bg-gray-200 cursor-not-allowed" disabled>
                                </div>
                            </div>
                        </div>

                        <!-- Address Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Address</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="permanent_address" class="block text-gray-600 font-medium">Permanent Address</label>
                                    <input type="text" id="permanent_address" value="{{ address.permanent_address }}" name="permanent_address" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="country" class="block text-gray-600 font-medium">Country</label>
                                    <input type="text" id="country" name="country" value="{{ address.country }}" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="city" class="block text-gray-600 font-medium">City</label>
                                    <input type="text" id="city" value="{{ address.city }}" name="city" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="pincode" class="block text-gray-600 font-medium">Pincode</label>
                                    <input type="text" id="pincode" value="{{ address.pincode }}" name="pincode" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Emergency Contact Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Emergency Contact</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="contact_name" class="block text-gray-600 font-medium">Name</label>
                                    <input type="text" id="contact_name" value="{{ contact.contact_name }}" name="contact_name" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="relationship" class="block text-gray-600 font-medium">Relationship</label>
                                    <input type="text" id="relationship" value="{{ contact.relationship }}" name="relationship" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="contact_number" class="block text-gray-600 font-medium">Phone Number</label>
                                    <input type="text" id="contact_number" value="{{ contact.contact_number }}" name="contact_number" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="emergency_country" class="block text-gray-600 font-medium">Country</label>
                                    <input type="text" id="emergency_country" value="{{ contact.country }}" name="emergency_country" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="emergency_city" class="block text-gray-600 font-medium">City</label>
                                    <input type="text" id="emergency_city" value="{{ contact.city }}" name="emergency_city" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="emergency_pincode" class="block text-gray-600 font-medium">Pincode</label>
                                    <input type="text" id="emergency_pincode" value="{{ contact.pincode }}" name="emergency_pincode" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Benefits Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Benefits</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="salary_details" class="block text-gray-600 font-medium">Salary Details</label>
                                    <input type="text" id="salary_details" value="{{ benefits.salary_details }}" name="salary_details" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="bank_name" class="block text-gray-600 font-medium">Bank Name</label>
                                    <input type="text" id="bank_name" value="{{ benefits.bank_name }}" name="bank_name" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="account_number" class="block text-gray-600 font-medium">Account Number</label>
                                    <input type="number" id="account_number" value="{{ benefits.account_number }}" name="account_number" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="branch_name" class="block text-gray-600 font-medium">Branch Name</label>
                                    <input type="text" id="branch_name" value="{{ benefits.branch_name }}" name="branch_name" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="ifsc_code" class="block text-gray-600 font-medium">IFSC Code</label>
                                    <input type="text" id="ifsc_code" value="{{ benefits.ifsc_code }}" name="ifsc_code" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="pancard" class="block text-gray-600 font-medium">PAN Card</label>
                                    <input type="text" id="pancard" value="{{ benefits.pancard }}" name="pancard" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="pf_fund" class="block text-gray-600 font-medium">PF Fund</label>
                                    <input type="number" step="0.01" value="{{ benefits.pf_fund }}" id="pf_fund" name="pf_fund" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="state_insurance_number" class="block text-gray-600 font-medium">State Insurance Number</label>
                                    <input type="text" id="state_insurance_number" value="{{ benefits.state_insurance_number }}" name="state_insurance_number" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Background Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Background</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="educational_qualifications" class="block text-gray-600 font-medium">Educational Qualifications</label>
                                    <input type="text" id="educational_qualifications" value="{{ background.educational_qualifications }}" name="educational_qualifications" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="previous_details" class="block text-gray-600 font-medium">Previous Details</label>
                                    <input type="text" id="previous_details" value="{{ background.previous_details }}" name="previous_details" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Identification Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Identification</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="identification_type" class="block text-gray-600 font-medium">Identification Type</label>
                                    <select id="identification_type" name="identification_type" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                        <option value="">Select Identification Type</option>
                                        <option value="AD">Adhaar</option>
                                        <option value="PS">Passport</option>
                                        <option value="SSN">Social Security Number (US)</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="work_authorization" class="block text-gray-600 font-medium">Work Authorization</label>
                                    <input type="text" id="work_authorization" value="{{identification.work_authorization}}" name="work_authorization" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="identification_file" class="block text-gray-600 font-medium">Identification File</label>
                                    <input type="file" id="identification_file" name="identification_file" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Work Schedule Section -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-700">Work Schedule</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label for="start_time" class="block text-gray-600 font-medium">Start Time</label>
                                    <input type="time" id="start_time" value="{{schedule_start_time}}" name="start_time" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="end_time" class="block text-gray-600 font-medium">End Time</label>
                                    <input type="time" id="end_time" value="{{schedule_end_time}}" name="end_time" class="mt-1 block w-full border border-gray-300 p-3 rounded-lg focus:ring focus:ring-blue-300 focus:border-blue-500">
                                </div>
                            </div>
                        </div>
                        

                        <!-- Submit Button -->
                        <div class="flex justify-center mt-8">
                            <button type="submit" class="bg-blue-500 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-300">
                                Submit
                            </button>
                        </div>
                    </form>
                    </div>
                    <!-- Form Ends -->
                </div>
            </div>
        </section>
    </section>

</body>
</html>

